<!-- Created by Dayu Wang (dwang@stchas.edu) on 2020-07-27. -->

<!-- Last updated by Dayu Wang (dwang@stchas.edu) on 2020-07-27. -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
    <script type="text/javascript">
        const DOCUMENT_TITLE = 'LeetCode 1530';
        const FAVICON_URL = "https://drive.google.com/uc?export=download&id=1y71NxJX3b9-Qbka_gTYlXoZIA-9CyU9T";
        const NUMBERED_QUESTIONS = false;
        const OUTPUT_ELEMENT = null;
        const AUTHORS = [
            {
                "NAME" : "Dayu Wang",
                "EMAIL" : "dwang@stchas.edu"
            }
        ]; const COLORS = {
            "ANSWER" : "darkcyan",
            "BACKGROUND" : "white",
            "HIGHLIGHT" : "#ffff99",
            "MAIN" : "black",
            "THEME" : "orangered",
            "KEYWORD" : "blue",
            "KW" : "blue",
            "CODE_HIGHLIGHT" : "gainsboro",
            "NEGATION" : "red",
            "GUIDELINE" : "navy",
            "SIGNATURE" : "deeppink"
        }; const DOCUMENT = {
            "JUSTIFY" : true,
            "SPACING" : 12  // In 'pt'
        }; const FONTS = {
            "TEXT" : "verdana",
            "CODE" : "consolas,monaco,monospace"
        }; const SIZES = {
            "TEXT" : {
                "LARGE" : 12,  // In 'pt'
                "REGULAR" : 11,  // In 'pt'
                "SMALL" : 10  // In 'pt'
            },
            "CODE" : {
                "REGULAR" : 12.5,  // In 'pt'
                "SMALL" : 11.5  // In 'pt'
            }
        }; const WINDOW = {
            "WIDTH" : 600  // In 'pt'
        }
    </script>
    <script src="https://drive.google.com/uc?export=download&id=1G6gs10Dt_Y4fYCBeh_cXmH2LrR4awGIY" type="text/javascript"></script>
    <title></title>
</head>
<body>

<!-- Document Header -->
<div class="header">
    <p>Solution to Algorithm Questions</p>
    <p>LeetCode 1530 - Number of Good Leaf Nodes Pairs</p>
    <div class="author">Solution Prepared by</div>
</div>

<!-- Question -->
<div class="question">
    <p>Question 1530 - Number of Good Leaf Nodes Pairs</p><hr>
    <p>Given the root of a <span class="hl">binary tree</span> and an <span class="hl">integer distance</span>, a pair of two different <span class="hl">leaf nodes</span> of the binary tree is said to be <span class="bold">good</span> if the length (number of edges) of the shortest path between them is less than or equal to the distance.</p>
    <p>Please write a function/method that <span class="hl">returns the number of good pairs</span> in the binary tree.</p>
    <div class="ex 1 175">
        <p class="Arguments"><span class="code theme small" style="vertical-align:top;position:relative;bottom:-5px;">root</span><span class="code main small" style="vertical-align: top;position: relative; bottom:-5px;">: </span><img class="inline H150" alt="pic_1" src="pictures/pic_1.png"><br><span class="code theme small">distance</span><span class="code main small">: 3</span></p>
        <p class="Expected Return Value"><span class="code main small">1</span></p>
        <p class="Explanation">The leaf nodes of the tree are <span class="code bold main small">3</span> and <span class="code bold main small">4</span> and the length of the shortest path between them is <span class="code hl small bold">3</span>.&nbsp; This is the only good pair.</p>
    </div>
    <div class="ex 2 175">
        <p class="Arguments"><span class="code theme small" style="vertical-align:top;position:relative;bottom:-5px;">root</span><span class="code main small" style="vertical-align: top;position: relative; bottom:-5px;">: </span><img class="inline H150" alt="pic_2" src="pictures/pic_2.png"><br><span class="code theme small">distance</span><span class="code main small">: 3</span></p>
        <p class="Expected Return Value"><span class="code main small">2</span></p>
        <p class="Explanation">The good pairs are (<span class="code main small bold">4</span>, <span class="code main small bold">5</span>) and (<span class="code main small bold">6</span>, <span class="code main small bold">7</span>) with shortest path of <span class="code small main bold hl">2</span>. The pair (<span class="code main small bold">4</span>, <span class="code main small bold">6</span>) is <span class="no">not</span> good because the length of the shortest path between them is <span class="code small main bold hl">4</span>.</p>
    </div>
    <p>Constraints and notes:</p>
    <div class="list">
        <p>The tree is <span class="no">non-empty</span>.</p>
        <p>The tree may be very <span class="no">unbalanced</span>.</p>
        <p><span class="math bold">d \ge 1</span> and <span class="math bold">O(d) \le O(n)</span>, where <span class="math bold 3">d</span> is the <span class="code theme">distance</span> and <span class="math bold">n</span> is the number of nodes in the tree.</p>
    </div>
</div>

<!-- Solution -->
<div class="answer">
    <p>Dayu Wang's Solution</p><hr>
    <div class="code">
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: #3f5fbf;">/** Definition for a binary tree node.</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas;">&nbsp;</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: #3f5fbf;">&nbsp;&nbsp;&nbsp; public class TreeNode {</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: #3f5fbf;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int val;</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: #3f5fbf;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TreeNode left, right;</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: #3f5fbf;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TreeNode() {}</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: #3f5fbf;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TreeNode(int val) { this.val = val; }</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: #3f5fbf;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TreeNode(int val, TreeNode left, TreeNode right) {</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: #3f5fbf;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.val = val;</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: #3f5fbf;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.left = left;</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: #3f5fbf;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.right = right;</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: #3f5fbf;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: #3f5fbf;">&nbsp;&nbsp;&nbsp; }</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: #3f5fbf;">*/</span></p>
        <p style="line-height: normal; text-autospace: none;"><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">class</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> Solution {</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp; </span><span style="font-size: 16.0pt; font-family: Consolas; color: #3f5fbf;">/** DFS</span><span style="font-size: 16.0pt; font-family: Consolas; color: #7f7f9f;">-</span><span style="font-size: 16.0pt; font-family: Consolas; color: #3f5fbf;">Based algorithm */</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp; </span><span style="font-size: 16.0pt; font-family: Consolas; color: #3f7f5f;">// L[i] stores the number of leaf nodes with depth (i + 1).</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">private</span></strong> <strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">void</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> leafLengths(TreeNode </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">root</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">, </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">int</span></strong> <span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">, </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">int</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[] </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">L</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">, </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">int</span></strong> <span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">depth</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">) {</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">if</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> (</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">depth</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> &gt;= </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> - 1) { </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">return</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;">; }</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">if</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> (</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">root</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">.left == </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">null</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> &amp;&amp; </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">root</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">.right == </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">null</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;">) { </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">L</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">depth</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">]++; }</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">if</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> (</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">root</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">.left != </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">null</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;">) {</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; leafLengths(</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">root</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">.left, </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">, </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">L</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">, </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">depth</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> + 1);</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">if</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> (</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">root</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">.right != </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">null</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;">) {</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; leafLengths(</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">root</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">.right, </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">, </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">L</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">, </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">depth</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> + 1);</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp; }</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">public</span></strong> <strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">int</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> countPairs(TreeNode </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">root</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">, </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">int</span></strong> <span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">) {</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">int</span></strong> <span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">left</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> = 0;</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">if</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> (</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">root</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">.left != </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">null</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;">) { </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">left</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> = countPairs(</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">root</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">.left, </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">); }</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">int</span></strong> <span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">right</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> = 0;</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">if</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> (</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">root</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">.right != </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">null</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;">) { </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">right</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> = countPairs(</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">root</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">.right, </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">); }</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">int</span></strong> <span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">L</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[] = </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">new</span></strong> <strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">int</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> - 1], </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">R</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[] = </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">new</span></strong> <strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">int</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> - 1];</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">if</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> (</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">root</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">.left != </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">null</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;">) { leafLengths(</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">root</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">.left, </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">, </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">L</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">, 0); }</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">if</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> (</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">root</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">.right != </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">null</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;">) { leafLengths(</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">root</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">.right, </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">, </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">R</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">, 0); }</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">int</span></strong> <span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">preSumL</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[] = </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">new</span></strong> <strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">int</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> - 1], </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">preSumR</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[] = </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">new</span></strong> <strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">int</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> - 1];</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">int</span></strong> <span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">count</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> = 0;</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">for</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> (</span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">int</span></strong> <span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">i</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> = 0; </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">i</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> &lt; </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> - 1; </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">i</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">++) {</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">preSumL</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">i</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">] += (</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">i</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> == 0 ? 0 : </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">preSumL</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">i</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> - 1]) + </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">L</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">i</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">];</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">for</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> (</span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">int</span></strong> <span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">j</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> = 0; </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">j</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> &lt; </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> - 1; </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">j</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">++) {</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">preSumR</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">j</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">] += (</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">j</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> == 0 ? 0 : </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">preSumR</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">j</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> - 1]) + </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">R</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">j</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">];</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">for</span></strong><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> (</span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">int</span></strong> <span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">k</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> = 0; </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">k</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> &lt; </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> - 1; </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">k</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">++) {</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">count</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> += </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">L</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">k</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">] * </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">preSumR</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> - 2 - </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">k</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">];</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">count</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> += </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">R</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">k</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">] * </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">preSumL</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">[</span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">distance</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> - 2 - </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">k</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">];</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><strong><span style="font-size: 16.0pt; font-family: Consolas; color: #7f0055;">return</span></strong> <span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">count</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> / 2 + </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">left</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;"> + </span><span style="font-size: 16.0pt; font-family: Consolas; color: #6a3e3e;">right</span><span style="font-size: 16.0pt; font-family: Consolas; color: black;">;</span></p>
        <p style="line-height: normal; text-autospace: none;"><span style="font-size: 16.0pt; font-family: Consolas; color: black;">&nbsp;&nbsp;&nbsp; }</span></p>
        <p><span style="font-size: 16.0pt; line-height: 125%; font-family: Consolas; color: black;">}</span></p>
    </div>
    <p>Time complexity: <span class="math blue bold">O(n \log{n})</span></p>
</div>
</body>
</html>